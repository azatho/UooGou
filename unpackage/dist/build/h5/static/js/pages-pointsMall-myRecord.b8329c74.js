(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pointsMall-myRecord"],{"0551":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"tab"},[t._l(t.tab,(function(e,i){return[a("v-uni-view",{key:e.id+"_0",class:t.selectid==e.id?"txt1":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gotabbal(e.id)}}},[t._v(t._s(e.title))])]}))],2),a("v-uni-view",{staticStyle:{width:"100%",height:"80rpx"}}),t.loading&&0==t.orderList.length?a("v-uni-view",{staticClass:"bgc"},[a("v-uni-image",{attrs:{src:i("4487").replace(/^\./,"")}}),a("v-uni-view",{staticStyle:{"text-align":"center","font-size":"26rpx","font-family":"PingFang SC","font-weight":"400",color:"#999999",margin:"50rpx 0"}},[t._v("您还没有相关订单")])],1):a("v-uni-view",t._l(t.orderList,(function(e,i){return a("v-uni-view",{key:i,staticClass:"list"},[a("v-uni-view",{staticClass:"one"},[a("v-uni-view",{staticClass:"left"},[a("v-uni-text",{staticStyle:{color:"#999999"}},[t._v("订单号："+t._s(e.order_id))])],1),a("v-uni-view",{class:0==e.order_status||6==e.order_status?"right":"right1"},[t._v(t._s(e.order_name))])],1),t._l(t.orderList[i].goods_list,(function(i,o){return a("v-uni-view",{key:o,staticClass:"two",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goparticulars(e.order_index,e.statusgoods)}}},[a("v-uni-view",{staticClass:"img"},[i.goods_icon?a("v-uni-image",{attrs:{src:t.cdnUrl+i.goods_icon}}):a("v-uni-view",{staticStyle:{width:"100%",height:"100%",border:"1px solid #f5f5f5",color:"#ccc","text-align":"center","line-height":"160rpx"}},[t._v("暂无图片")])],1),a("v-uni-view",{staticClass:"details"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticStyle:{display:"inline-block","background-color":"red",color:"#fff",padding:"0 5rpx","margin-right":"5rpx","border-radius":"5rpx"}},[t._v(t._s("3"==e.order_type?"秒杀":""))]),t._v(t._s(i.goods_name||"暂无名称"))],1),a("v-uni-view",{staticClass:"xia"},[1==i.goods_type?a("v-uni-view",{staticClass:"univalence"},[t._v(t._s(0!=i.goods_cost?"￥"+i.goods_cost/100+"+":"")+t._s(0!=e.order_coupon?e.order_coupon/100+"积分":""))]):t._e(),0==i.goods_type?a("v-uni-view",{staticClass:"univalence"},[t._v(t._s(0!=i.goods_cost?"￥"+i.goods_cost/100:""))]):t._e(),a("v-uni-view",{staticClass:"num"},[t._v("×"+t._s(i.goods_count))])],1)],1)],1)})),a("v-uni-view",{staticClass:"three"},[a("v-uni-view",{staticClass:"allClass"},[t._v("订单总价："+t._s(0!=e.order_total_price?"￥"+e.order_total_price/100:"")+t._s(0!=e.order_total_price&&0!=e.order_coupon?"+":"")+t._s(0==e.order_coupon?"":e.order_coupon/100+"积分"))]),a("v-uni-view",{staticClass:"btn"},[1==e.order_status?a("v-uni-view",{staticClass:"btn2",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.cancleOrder(e.order_index)}}},[t._v("取消订单")]):t._e(),6!=e.order_status&&3!=e.order_status&&4!=e.order_status?a("v-uni-view",{class:0==e.order_status||9==e.order_status||7==e.order_status?"btn3":"btn1",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getStatus(e.order_status,e)}}},[t._v(t._s(0==e.order_status?"已取消":1==e.order_status?"去支付":2==e.order_status||7==e.order_status?"退款":9==e.order_status?"已取消":5==e.order_status?"确认收货":""))]):t._e(),6==e.order_status&&2==e.goods_list[0].goods_status?a("v-uni-view",{staticClass:"btn1"},[t._v("已完成")]):t._e()],1)],1)],2)})),1)],1)},n=[]},"26fc":function(t,e,i){"use strict";i.r(e);var a=i("5448"),o=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=o.a},4487:function(t,e,i){t.exports=i.p+"static/img/zwsj.5201ab9c.png"},"4d28":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-2a39854c]{background-color:#f5f5f5;position:relative}.bgc[data-v-2a39854c]{position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);margin:%?300?% auto}.bgc uni-image[data-v-2a39854c]{width:%?374?%;height:%?314?%;opacity:.5}\r\n/* tab栏 */.tab[data-v-2a39854c]{position:fixed;left:0;top:%?80?%;margin-top:%?0?%;background-color:#fff;height:%?80?%;width:100%;line-height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:%?26?%;font-family:PingFang SC;font-weight:500;padding:0 %?30?% %?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:11}.txt1[data-v-2a39854c]{color:#fc4950;border-bottom:%?4?% solid #fc4950}\r\n/* 订单样式 */.list[data-v-2a39854c]{background-color:#fff;padding:%?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:%?10?%}.list uni-image[data-v-2a39854c]{width:100%;height:100%}\r\n/* 第一行 */.list .one[data-v-2a39854c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-family:Source Han Sans CN;font-size:%?30?%;padding-bottom:%?10?%;border-bottom:%?1?% solid #f5f5f5}.list .one .left[data-v-2a39854c]{font-weight:400;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.list .one .right[data-v-2a39854c]{font-weight:300;color:#999}.list .one .right1[data-v-2a39854c]{font-weight:300;color:#fd494f}.list .one .image1[data-v-2a39854c]{width:%?37?%;height:%?33?%;margin-right:%?20?%}.list .one .image2[data-v-2a39854c]{width:%?13?%;height:%?26?%;margin-left:%?20?%}\r\n/* 第二行 */.list .two[data-v-2a39854c]{display:-webkit-box;display:-webkit-flex;display:flex;border-bottom:%?1?% solid #f5f5f5;margin:%?20?% 0;padding:%?30?% 0;-webkit-box-sizing:border-box;box-sizing:border-box}.list .two .img[data-v-2a39854c]{width:%?160?%;height:%?160?%;margin-right:%?20?%}.list .two .details[data-v-2a39854c]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.two .details .title[data-v-2a39854c]{font-size:%?26?%;font-family:PingFang SC;font-weight:400;color:#333;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.two .details .xia[data-v-2a39854c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-family:Source Han Sans CN;margin-top:%?50?%}.details .xia .univalence[data-v-2a39854c]{font-size:%?30?%;font-weight:400;color:#ff3636}.details .xia .num[data-v-2a39854c]{font-size:%?26?%;font-weight:300;color:#999}\r\n/* 第三行 */.list .three[data-v-2a39854c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.list .three .allClass[data-v-2a39854c]{font-size:%?26?%;font-family:PingFang SC;font-weight:400;color:#003}.list .three .btn[data-v-2a39854c]{display:-webkit-box;display:-webkit-flex;display:flex}.three .btn .btn1[data-v-2a39854c]{width:%?135?%;height:%?50?%;padding:0 %?10?%;background:#f6281b;-webkit-border-radius:%?25?%;border-radius:%?25?%;line-height:%?50?%;text-align:center;font-size:%?26?%;font-family:Source Han Sans CN;font-weight:300;color:#fff}.three .btn .btn2[data-v-2a39854c]{width:%?135?%;height:%?48?%;padding:0 %?10?%;border:%?1?% solid #f6281b;-webkit-border-radius:%?25?%;border-radius:%?25?%;line-height:%?50?%;text-align:center;font-size:%?26?%;font-family:Source Han Sans CN;font-weight:300;color:#f6281b;margin-right:%?40?%}.three .btn .btn3[data-v-2a39854c]{width:%?135?%;height:%?48?%;padding:0 %?10?%;border:%?1?% solid #ccc;-webkit-border-radius:%?25?%;border-radius:%?25?%;line-height:%?50?%;text-align:center;font-size:%?26?%;font-family:Source Han Sans CN;font-weight:300;color:#999}body.?%PAGE?%[data-v-2a39854c]{background-color:#f5f5f5}",""]),t.exports=e},5448:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{tab:[{id:"0",title:"全部"},{id:"1",title:"待支付"},{id:"2",title:"待发货"},{id:"3",title:"待收货"},{id:"4",title:"已完成"}],selectid:"0",page:0,pageCount:"",cdnUrl:"",user_coupon:0,orderList:[],loading:!1}},methods:{gotabbal:function(t){this.selectid=t,this.page=0,this.orderList=[],this.init()},init:function(){var e=this;this.loading=!1,uni.showLoading({title:"加载中"});var i=this;i.request({url:"ugo/api/app.php?c=mallOrderList",data:{page:i.page,type:i.selectid,order_type:"4"}}).then((function(a){if(a.data.success){uni.hideLoading(),e.loading=!0,i.pageCount=a.data.pageCount,i.user_coupon=a.data.data.user_coupon;for(var o=0;o<a.data.data.list.length;o++)"0"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="已取消"),"1"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="待付款"),"2"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="待发货"),"5"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="待收货"),"6"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="已完成"),"7"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="退款审核中"),"8"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="退款中"),"9"==a.data.data.list[o].order_status&&(a.data.data.list[o].order_name="退款成功"),t("log","0"==a.data.data.list[o].order_status," at pages/pointsMall/myRecord.vue:121"),i.orderList.push(a.data.data.list[o]);t("log",i.orderList," at pages/pointsMall/myRecord.vue:124")}else uni.hideLoading(),e.loading=!0,"登录状态失效，请重新登录~！"==a.data.msg&&uni.showModal({content:"未登录，请先登录",success:function(t){t.confirm?uni.switchTab({url:"/pages/my/my"}):t.cancel&&uni.switchTab({url:"/pages/index/index"})}})}))},goshop:function(t,e){3!=e?uni.navigateTo({url:"../common/shopHome?id="+t}):uni.navigateTo({url:"../my/NoShop?id="+t})},goparticulars:function(t){uni.navigateTo({url:"pointShopOrder?index="+t})},cancleOrder:function(e,i){var a=this,o="";o=i?"您确定退款吗":"您确定取消吗",uni.showModal({content:o,success:function(i){i.confirm&&a.request({url:"ugo/api/app.php?c=cancelOrder",data:{token:uni.getStorageSync("token"),order_index:e,app_type:"3"}}).then((function(t){t.data.success?(uni.showToast({title:t.data.msg}),a.page=0,a.orderList=[],a.init()):uni.showToast({icon:"none",title:t.data.msg})}),(function(e){t("log",e," at pages/pointsMall/myRecord.vue:201")}))}})},getStatus:function(e,i){var a=this;0==e||(6==e?uni.navigateTo({url:"./publishComment?index="+i.order_index}):1==e?uni.navigateTo({url:"payOrder?order_index="+i.order_index+"&price="+i.order_total_price+"&order_total_score="+i.order_coupon+"&send_score="+i.order_send_score}):2==e?uni.showModal({title:"提示",content:"您确定要取消订单并退款吗？",success:function(e){e.confirm?a.request({url:"ugo/api/app.php?c=createServiceOrderV2",data:{token:uni.getStorageSync("token"),order_index:i.order_index}}).then((function(t){t.data.success?(uni.showToast({title:t.data.msg,icon:"none"}),a.page=0,a.orderList=[],a.init()):uni.showToast({icon:"none",title:t.data.msg})}),(function(e){t("log",e," at pages/pointsMall/myRecord.vue:283")})):e.cancel}}):5!=e&&4!=e||a.request({url:"ugo/api/app.php?c=order/confirmOrder",data:{token:uni.getStorageSync("token"),order_index:i.order_index}}).then((function(t){t.data.success?(uni.showToast({title:t.data.msg}),a.page=0,a.orderList=[],a.init()):uni.showToast({icon:"none",title:t.data.msg})}),(function(e){t("log",e," at pages/pointsMall/myRecord.vue:313")})))},onBridgeReady:function(e){t("log",e," at pages/pointsMall/myRecord.vue:318");var i=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:i.payInfo.appId,timeStamp:i.payInfo.timeStamp,nonceStr:i.payInfo.nonceStr,package:i.payInfo.package,signType:"MD5",paySign:i.payInfo.paySign},(function(t){"get_brand_wcpay_request:ok"==t.err_msg&&i.request({url:"ugo/api/app.php?c=checkPayOrder",data:{order_index:i.orderList.order_index}}).then((function(t){t.data.success&&uni.navigateTo({url:"/pages/common/successPay?order_total_price="+e})}))}))}},onShow:function(){uni.getStorageSync("type")?(this.selectid=uni.getStorageSync("type"),uni.removeStorageSync("type")):this.selectid=0,this.cdnUrl=this.$cdnUrl,this.orderList=[],this.page=0,t("log",this.orderList.length," at pages/pointsMall/myRecord.vue:359"),this.orderList.length||this.init()},onReachBottom:function(){this.page<this.pageCount-1&&(this.page++,this.init())},onLoad:function(){}};e.default=i}).call(this,i("0de9")["log"])},7111:function(t,e,i){"use strict";var a=i("8030"),o=i.n(a);o.a},8030:function(t,e,i){var a=i("4d28");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("2617923a",a,!0,{sourceMap:!1,shadowMode:!1})},f0e5:function(t,e,i){"use strict";i.r(e);var a=i("0551"),o=i("26fc");for(var n in o)"default"!==n&&function(t){i.d(e,t,(function(){return o[t]}))}(n);i("7111");var s,r=i("f0c5"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"2a39854c",null,!1,a["a"],s);e["default"]=d.exports}}]);